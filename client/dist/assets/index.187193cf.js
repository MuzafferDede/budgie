var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,r=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&i(e,n,t[n]);if(s)for(var n of s(t))a.call(t,n)&&i(e,n,t[n]);return e},l=(e,s)=>t(e,n(s));import{i as c,v as d,h as u,o as p,c as m,w as C,T as h,r as f,a as g,b as v,d as w,e as x,f as y,g as b,j as k,k as T,F as L,l as M,t as $,m as A,n as E,p as V,q as S,s as _}from"./vendor.45d1a0bf.js";const O={notify:new Audio("notify.mp3"),message:new Audio("message.mp3"),error:new Audio("error.mp3"),ringtone:new Audio("ringtone.mp3"),typing:new Audio("typing.mp3")};let N;const H=c("http"+("localhost"==location.hostname?"":"s")+"://"+location.hostname+("localhost"==location.hostname?":8080":""),{autoConnect:!1});function I(e){return e?u(e).fromNow():void 0}function z(e,t=!1,n=!0){N&&(N.pause(),N.currentTime=0),N=O[e],N.currentTime=0,N.loop=t,n&&N.play()}function U(e){"denied"!==Notification.permission&&Notification.requestPermission(),"visible"!==document.visibilityState&&"granted"===Notification.permission&&new Notification(e.title,{body:e.body,icon:"/logo.png"})}const R={props:{animation:{type:String,default:"fade"},duration:{type:Object,default:()=>({in:"duration-300",out:"duration-75"})}},computed:{transition:()=>({fade:{enterFrom:"opacity-0",enterTo:"opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},translate:{enterFrom:"transform opacity-0 -translate-y-4",enterTo:"transform opacity-100 translate-y-0",leaveFrom:"transform opacity-100 translate-y-0",leaveTo:"transform opacity-0 -translate-y-4"},"translate-reverse":{enterFrom:"transform opacity-0 translate-y-4",enterTo:"transform opacity-100 -translate-y-0",leaveFrom:"transform opacity-100 -translate-y-0",leaveTo:"transform opacity-0 translate-y-4"},pull:{enterFrom:"transform opacity-0 translate-y-full",enterTo:"transform opacity-100 translate-y-0",leaveFrom:"transform opacity-100 translate-y-0",leaveTo:"transform opacity-0 translate-y-full"},slide:{enterFrom:"transform opacity-0 -mr-96",enterTo:"transform opacity-100 mr-0",leaveFrom:"transform opacity-100 mr-0",leaveTo:"transform opacity-0 -mr-96"},scale:{enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"}})}};R.render=function(e,t,n,s,o,a){return p(),m(h,{"enter-from-class":a.transition[n.animation].enterFrom,"enter-active-class":`transition-all ease-in-out ${n.duration.in}`,"enter-to-class":a.transition[n.animation].enterTo,"leave-from-class":a.transition[n.animation].leaveFrom,"leave-active-class":`transition-all ease-in-out ${n.duration.out}`,"leave-to-class":a.transition[n.animation].leaveTo},{default:C((()=>[f(e.$slots,"default")])),_:3},8,["enter-from-class","enter-active-class","enter-to-class","leave-from-class","leave-active-class","leave-to-class"])};const j={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},D=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1);const B={viewBox:"0 0 48 48",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},F=g("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M43.683 15.52c-2.086 0-3.777-2.579-3.777-5.76 0-3.181 1.691-5.76 3.777-5.76 2.087 0 3.778 2.579 3.778 5.76 0 3.181-1.691 5.76-3.778 5.76zm-1.259-5.76c-.695 0-1.259-.86-1.259-1.92s.564-1.92 1.26-1.92c.695 0 1.258.86 1.258 1.92s-.563 1.92-1.259 1.92zM4.965 15.52c2.086 0 3.777-2.579 3.777-5.76C8.742 6.579 7.051 4 4.965 4 2.879 4 1.187 6.579 1.187 9.76c0 3.181 1.692 5.76 3.778 5.76zm1.259-5.76c.695 0 1.259-.86 1.259-1.92s-.564-1.92-1.26-1.92c-.695 0-1.258.86-1.258 1.92s.563 1.92 1.259 1.92z"},null,-1),Z=g("path",{d:"M24.324 23.535a3.95 3.95 0 0 1-2.99 1.372c-1.537 0-2.871-.884-3.537-2.179a2.897 2.897 0 0 0-.038 1.895l3.87 12.116c.848 2.654 4.542 2.654 5.39 0l3.87-12.116a2.898 2.898 0 0 0-.038-1.895c-.666 1.295-2 2.179-3.537 2.179a3.95 3.95 0 0 1-2.99-1.372zM23.327 19.84c0 .56-.892 1.014-1.993 1.014S19.34 20.4 19.34 19.84s.893-1.013 1.994-1.013c1.1 0 1.993.453 1.993 1.013zM29.308 19.84c0 .56-.892 1.014-1.994 1.014-1.1 0-1.993-.454-1.993-1.014s.892-1.013 1.993-1.013c1.102 0 1.994.453 1.994 1.013zM11.618 38.793c.83-.551.37-1.864-.616-1.758l-8.464.907c-1.824.196-2.987 2.074-2.372 3.83l.11.313c.615 1.756 2.684 2.464 4.219 1.444l7.123-4.736zM6.54 31.665a2.428 2.428 0 0 1 0 3.394 2.334 2.334 0 0 1-3.34 0 2.428 2.428 0 0 1 0-3.394 2.334 2.334 0 0 1 3.34 0zM10.709 33.245a1.418 1.418 0 0 1 0 1.983 1.363 1.363 0 0 1-1.95 0 1.418 1.418 0 0 1 0-1.983 1.363 1.363 0 0 1 1.95 0zM14.219 35.398a.971.971 0 0 1 0 1.358.933.933 0 0 1-1.336 0 .971.971 0 0 1 0-1.358.933.933 0 0 1 1.336 0zM36.382 38.793c-.83-.551-.37-1.864.616-1.758l8.464.907c1.824.196 2.987 2.074 2.372 3.83l-.11.313c-.615 1.756-2.684 2.464-4.219 1.444l-7.123-4.736zM41.46 31.665a2.428 2.428 0 0 0 0 3.394 2.334 2.334 0 0 0 3.34 0 2.428 2.428 0 0 0 0-3.394 2.334 2.334 0 0 0-3.34 0zM37.291 33.245a1.418 1.418 0 0 0 0 1.983 1.363 1.363 0 0 0 1.95 0 1.418 1.418 0 0 0 0-1.983 1.363 1.363 0 0 0-1.95 0zM33.782 35.398a.971.971 0 0 0 0 1.358.933.933 0 0 0 1.335 0 .971.971 0 0 0 0-1.358.933.933 0 0 0-1.335 0z"},null,-1);const P={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},q=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 9-7 7-7-7"},null,-1);const G={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Y=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 3h5m0 0v5m0-5-6 6M5 3a2 2 0 0 0-2 2v1c0 8.284 6.716 15 15 15h1a2 2 0 0 0 2-2v-3.28a1 1 0 0 0-.684-.948l-4.493-1.498a1 1 0 0 0-1.21.502l-1.13 2.257a11.042 11.042 0 0 1-5.516-5.517l2.257-1.128a1 1 0 0 0 .502-1.21L9.228 3.683A1 1 0 0 0 8.279 3H5z"},null,-1);const K={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Q=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m5 13 4 4L19 7"},null,-1);const J={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},W=g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 0 1 1.414 0L10 8.586l4.293-4.293a1 1 0 1 1 1.414 1.414L11.414 10l4.293 4.293a1 1 0 0 1-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L8.586 10 4.293 5.707a1 1 0 0 1 0-1.414z","clip-rule":"evenodd"},null,-1);const X={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ee=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"},null,-1);const te={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ne=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0-5 5M4 16v4m0 0h4m-4 0 5-5m11 5-5-5m5 5v-4m0 4h-4"},null,-1);const se={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},oe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m21 3-6 6m0 0V4m0 5h5M5 3a2 2 0 0 0-2 2v1c0 8.284 6.716 15 15 15h1a2 2 0 0 0 2-2v-3.28a1 1 0 0 0-.684-.948l-4.493-1.498a1 1 0 0 0-1.21.502l-1.13 2.257a11.042 11.042 0 0 1-5.516-5.517l2.257-1.128a1 1 0 0 0 .502-1.21L9.228 3.683A1 1 0 0 0 8.279 3H5z"},null,-1);const ae={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ie=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11a6.002 6.002 0 0 0-4-5.659V5a2 2 0 1 0-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 1 1-6 0v-1m6 0H9"},null,-1);const re={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},le=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 0 1-7 7m0 0a7 7 0 0 1-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 0 1-3-3V5a3 3 0 1 1 6 0v6a3 3 0 0 1-3 3z"},null,-1);const ce={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},de=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 0 1-7 7m0 0a7 7 0 0 1-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 0 1-3-3V5a3 3 0 1 1 6 0v6a3 3 0 0 1-3 3z"},null,-1);const ue={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 7a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 7a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"},null,-1);const me={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ce=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0zm-4 7a7 7 0 0 0-7 7h14a7 7 0 0 0-7-7z"},null,-1);const he={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m12 19 9 2-9-18-9 18 9-2zm0 0v-8"},null,-1);const ge={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ve=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11a6.002 6.002 0 0 0-4-5.659V5a2 2 0 1 0-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 1 1-6 0v-1m6 0H9"},null,-1);const we={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xe=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m15 10 4.553-2.276A1 1 0 0 1 21 8.618v6.764a1 1 0 0 1-1.447.894L15 14M5 18h8a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2z"},null,-1);const ye={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},be=g("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.536 8.464a5 5 0 0 1 0 7.072m2.828-9.9a9 9 0 0 1 0 12.728M5.586 15H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"},null,-1);const ke={add:function(e,t){return p(),m("svg",j,[D])},avatar:function(e,t){return p(),m("svg",B,[F,Z])},arrow:function(e,t){return p(),m("svg",P,[q])},call:function(e,t){return p(),m("svg",G,[Y])},check:function(e,t){return p(),m("svg",K,[Q])},close:function(e,t){return p(),m("svg",J,[W])},contacts:function(e,t){return p(),m("svg",X,[ee])},fullscreen:function(e,t){return p(),m("svg",te,[ne])},hang:function(e,t){return p(),m("svg",se,[oe])},notification:function(e,t){return p(),m("svg",ae,[ie])},mic:function(e,t){return p(),m("svg",re,[le])},mute:function(e,t){return p(),m("svg",ce,[de])},options:function(e,t){return p(),m("svg",ue,[pe])},user:function(e,t){return p(),m("svg",me,[Ce])},send:function(e,t){return p(),m("svg",he,[fe])},silence:function(e,t){return p(),m("svg",ge,[ve])},video:function(e,t){return p(),m("svg",we,[xe])},volume:function(e,t){return p(),m("svg",ye,[be])}},Te={none:"",xs:"w-3 h-3",sm:"w-4 h-4",DEFAULT:"w-6 h-6",lg:"w-8 h-8 ",xl:"w-10 h-10","2xl":"w-12 h-12","3xl":"w-16 h-16","4xl":"w-20 h-20"},Le={props:{name:{type:String,default:void 0},size:{type:String,default:"DEFAULT"}},computed:{dimension(){return Te[this.size]},currentIcon(){return ke[this.name]}}};Le.render=function(e,t,n,s,o,a){return p(),m(v(a.currentIcon),{class:["flex-shrink-0",a.dimension],is:a.currentIcon},null,8,["is","class"])};const Me={none:"",green:"bg-green-400 hover:bg-green-500 text-white",blue:"bg-blue-400 hover:bg-blue-500 text-white",red:"bg-red-400 hover:bg-red-500 text-white",gray:"bg-gray-400 hover:bg-gray-500 text-white",white:"bg-white hover:bg-gray-100 shadow"},$e={sm:"px-2 py-2 text-sm",base:"px-3 py-3 text-lg",lg:"px-5 py-5 text-lg",xl:"px-8 py-8 text-2xl"},Ae={props:{color:{type:String,default:"green"},size:{type:String,default:"base"}},computed:{bg(){return Me[this.color]},padding(){return $e[this.size]}}};Ae.render=function(e,t,n,s,o,a){return p(),m("button",{class:["rounded-full w-full",[a.bg,a.padding]]},[f(e.$slots,"default")],2)};const Ee={components:{UiTransition:R,UiIcon:Le,UiButton:Ae},data:()=>({name:void 0,error:void 0,avatar:"a"}),computed:{avatars:()=>avatars},methods:{login(){if(this.name)return this.$emit("login",{id:d(),name:this.name});this.$store.dispatch("app/setAlert",{title:"Error",body:"You must enter a name.",color:"red"})}}},Ve={class:"container my-auto absolute inset-0 flex justify-center items-center"},Se={class:"grid gap-8 mx-auto w-full lg:max-w-lg"},_e={class:"flex items-center justify-center space-x-4"},Oe={class:"p-3 bg-white rounded-full text-gray-900 shadow-lg"},Ne=g("p",{class:"text-3xl text-white"},"Budgie",-1),He={class:"w-full flex items-center space-x-4"},Ie={class:"flex-1 space-y-2"},ze=g("label",{for:"name",class:"text-sm text-white"},"Your name",-1),Ue={class:"w-full flex justify-center"},Re=T("Join"),je=g("div",{class:"flex justify-end"},[g("svg",{class:"w-28",viewBox:"0 0 179 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[g("path",{d:"M0 32C0 14.3269 14.3269 0 32 0C49.6731 0 64 14.3269 64 32C64 49.6731 49.6731 64 32 64C14.3269 64 0 49.6731 0 32Z",fill:"#2D3748"}),g("path",{d:"M32 52C43.0457 52 52 43.0457 52 32C52 20.9543 43.0457 12 32 12C20.9543 12 12 20.9543 12 32C12 43.0457 20.9543 52 32 52Z",fill:"#FF6F61"}),g("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M32.7684 16.585L45.2534 23.7894C45.3916 23.8692 45.4389 24.0457 45.3592 24.1839L44.3938 25.8552C44.3141 25.9932 44.1375 26.0405 43.9993 25.9607L31.5144 18.7565C31.3762 18.6768 31.3288 18.5001 31.4085 18.3619L32.3739 16.6907C32.4536 16.5526 32.6302 16.5054 32.7684 16.585ZM25.8153 28.6282L38.3002 35.8326C38.4384 35.9123 38.4858 36.0889 38.4061 36.227L37.4407 37.8984C37.361 38.0364 37.1844 38.0836 37.0462 38.0039L24.5613 30.7997C24.423 30.7199 24.3756 30.5433 24.4554 30.4051L25.4207 28.7339C25.5005 28.5958 25.6771 28.5486 25.8153 28.6282ZM24.1694 31.4635L36.6096 38.6458C36.7478 38.7256 36.7546 39.0193 36.5938 39.1053L31.0623 42.3197C30.9244 42.3999 30.7476 42.353 30.6673 42.2151C30.6364 42.1621 30.6233 42.1005 30.6297 42.0396L30.6953 41.4186C30.7051 41.3259 30.7591 41.2436 30.8403 41.1977L34.4469 39.1582C34.5858 39.0798 34.6346 38.9035 34.5558 38.7648C34.5305 38.72 34.4937 38.6828 34.4491 38.657L25.2583 33.3341C25.1203 33.2541 24.9435 33.3011 24.8636 33.4391C24.8381 33.483 24.8248 33.533 24.8248 33.5838L24.8252 34.2825C24.8251 34.3856 24.8801 34.4808 24.9693 34.5325L27.8706 36.2128C27.9145 36.2381 27.9509 36.2747 27.9762 36.3186L28.5737 37.3559C28.6533 37.494 28.6057 37.6707 28.4675 37.7501C28.4237 37.7754 28.374 37.7885 28.3233 37.7885L27.1308 37.7881C27.08 37.7881 27.0301 37.7747 26.9861 37.7493L25.2597 36.7494C25.1215 36.6693 24.9448 36.7163 24.8649 36.8544C24.8394 36.8983 24.826 36.9482 24.8261 36.9991L24.8264 38.0461C24.8265 38.2056 24.6972 38.3349 24.5377 38.3348C24.4868 38.3349 24.4369 38.3214 24.3928 38.2959L23.9482 38.0384C23.8591 37.9867 23.804 37.8915 23.8041 37.7885L23.8019 31.6973C23.8015 31.4702 24.0013 31.3664 24.1694 31.4635ZM24.4747 40.0486C24.4749 40.0486 24.475 40.0487 24.4752 40.0489C24.5646 40.1004 24.6195 40.1958 24.6196 40.299L24.6196 40.6495C24.6195 40.7528 24.6748 40.8483 24.7644 40.8999L27.4513 42.4466C27.5409 42.4982 27.5962 42.5936 27.5961 42.6968L27.5965 44.4163C27.5966 44.5196 27.5414 44.615 27.4519 44.6665L24.7015 46.1298C24.3587 46.3122 23.9329 46.1821 23.7505 45.8393C23.7007 45.7456 23.6727 45.6419 23.6687 45.5359L23.5893 43.4612C23.5893 43.3017 23.7185 43.1725 23.878 43.1725C23.9287 43.1725 23.9784 43.1859 24.0222 43.2111L25.0459 43.8003C25.1839 43.8797 25.3601 43.8325 25.4399 43.6948L25.7452 43.1677C25.8251 43.0297 25.7779 42.8529 25.6399 42.773L25.6392 42.7726L23.7342 41.6762C23.6447 41.6246 23.5895 41.5291 23.5894 41.4258L23.5889 40.038C23.589 39.8785 23.7182 39.7492 23.8777 39.7493C23.9282 39.7494 23.978 39.7627 24.0219 39.7879L24.4747 40.0486ZM29.0184 23.0802L41.5034 30.2846C41.6416 30.3644 41.6889 30.5409 41.6092 30.6791L39.0813 35.0567C39.0016 35.1948 38.825 35.242 38.6868 35.1623L26.2019 27.958C26.0637 27.8783 26.0163 27.7017 26.096 27.5634L28.6239 23.1859C28.7036 23.0478 28.8802 23.0006 29.0184 23.0802ZM31.0599 19.401L43.6757 26.6847C43.7792 26.7444 43.815 26.876 43.7558 26.9786L42.4514 29.2379C42.3922 29.3404 42.2603 29.3752 42.1569 29.3154C42.0942 29.2793 42.0537 29.2145 42.0487 29.1428L41.8896 26.821C41.8815 26.7025 41.7786 26.6123 41.6596 26.6195C41.6312 26.6212 41.6035 26.6285 41.578 26.641L39.1391 27.8343C39.0324 27.8865 38.9029 27.8424 38.8497 27.7358C38.8369 27.7104 38.8295 27.6827 38.8275 27.6544L38.6418 24.9459C38.6337 24.8273 38.5307 24.7372 38.4118 24.7444C38.3834 24.7461 38.3556 24.7534 38.3302 24.7659L35.8914 25.9592C35.7847 26.0115 35.6551 25.9673 35.6019 25.8607C35.5892 25.8352 35.5817 25.8076 35.5797 25.7793L35.3941 23.0708C35.3859 22.9523 35.283 22.8621 35.164 22.8694C35.1356 22.871 35.1079 22.8783 35.0824 22.8908L32.6439 24.0843C32.5373 24.1365 32.4077 24.0924 32.3545 23.9858C32.3418 23.9603 32.3342 23.9327 32.3323 23.9044L32.1467 21.1959C32.1385 21.0774 32.0356 20.9872 31.9166 20.9944C31.8882 20.9961 31.8605 21.0034 31.835 21.0159L29.7446 22.039C29.638 22.0912 29.5084 22.0471 29.4552 21.9405C29.423 21.8761 29.4252 21.8 29.461 21.7379L30.7654 19.4786C30.8246 19.376 30.9565 19.3413 31.0599 19.401Z",fill:"white"}),g("path",{d:"M14.2656 16.5312C15.5169 16.5312 16.5312 15.5169 16.5312 14.2656C16.5312 13.0144 15.5169 12 14.2656 12C13.0144 12 12 13.0144 12 14.2656C12 15.5169 13.0144 16.5312 14.2656 16.5312Z",fill:"#FF6F61"}),g("path",{d:"M79.6677 34C79.345 34 79.0737 33.89 78.8537 33.67C78.6484 33.45 78.5457 33.1787 78.5457 32.856V17.962C78.5457 17.6247 78.6484 17.3533 78.8537 17.148C79.0737 16.928 79.345 16.818 79.6677 16.818C80.0197 16.818 80.313 16.9573 80.5477 17.236L90.1397 29.996V17.962C90.1397 17.6247 90.2497 17.3533 90.4697 17.148C90.6897 16.928 90.961 16.818 91.2837 16.818C91.621 16.818 91.8924 16.928 92.0977 17.148C92.303 17.3533 92.4057 17.6247 92.4057 17.962V32.856C92.4057 33.1787 92.303 33.45 92.0977 33.67C91.8924 33.89 91.621 34 91.2837 34C91.137 34 90.9757 33.9707 90.7997 33.912C90.6384 33.8387 90.5064 33.736 90.4037 33.604L80.8117 20.844V32.856C80.8117 33.1787 80.7017 33.45 80.4817 33.67C80.2764 33.89 80.005 34 79.6677 34ZM97.9514 34C97.6288 34 97.3574 33.89 97.1374 33.67C96.9174 33.45 96.8074 33.1787 96.8074 32.856V17.962C96.8074 17.6247 96.9174 17.3533 97.1374 17.148C97.3574 16.928 97.6288 16.818 97.9514 16.818H107.895C108.233 16.818 108.504 16.9207 108.709 17.126C108.915 17.3167 109.017 17.5733 109.017 17.896C109.017 18.204 108.915 18.4533 108.709 18.644C108.504 18.8347 108.233 18.93 107.895 18.93H99.0954V24.276H105.409C105.747 24.276 106.018 24.3787 106.223 24.584C106.429 24.7747 106.531 25.024 106.531 25.332C106.531 25.64 106.429 25.8967 106.223 26.102C106.018 26.2927 105.747 26.388 105.409 26.388H99.0954V31.888H107.895C108.233 31.888 108.504 31.9833 108.709 32.174C108.915 32.3647 109.017 32.614 109.017 32.922C109.017 33.2447 108.915 33.5087 108.709 33.714C108.504 33.9047 108.233 34 107.895 34H97.9514ZM113.356 34C113.033 34 112.762 33.89 112.542 33.67C112.322 33.45 112.212 33.1787 112.212 32.856V17.962C112.212 17.6247 112.322 17.3533 112.542 17.148C112.762 16.928 113.033 16.818 113.356 16.818C113.796 16.818 114.133 17.0233 114.368 17.434L120.902 30.524L127.26 17.434C127.494 17.0233 127.832 16.818 128.272 16.818C128.594 16.818 128.866 16.928 129.086 17.148C129.306 17.3533 129.416 17.6247 129.416 17.962V32.856C129.416 33.1787 129.298 33.45 129.064 33.67C128.844 33.89 128.58 34 128.272 34C127.949 34 127.678 33.89 127.458 33.67C127.238 33.45 127.128 33.1787 127.128 32.856V21.922L121.804 32.768C121.554 33.1493 121.224 33.34 120.814 33.34C120.33 33.34 119.978 33.1127 119.758 32.658L114.5 22.12V32.856C114.5 33.1787 114.39 33.45 114.17 33.67C113.95 33.89 113.678 34 113.356 34ZM134.969 34C134.646 34 134.375 33.89 134.155 33.67C133.935 33.45 133.825 33.1787 133.825 32.856V17.962C133.825 17.6247 133.935 17.3533 134.155 17.148C134.375 16.928 134.646 16.818 134.969 16.818H138.929C140.029 16.818 141.004 17.0527 141.855 17.522C142.706 17.9767 143.366 18.6073 143.835 19.414C144.319 20.2207 144.561 21.1593 144.561 22.23C144.561 23.286 144.297 24.2173 143.769 25.024C143.241 25.816 142.522 26.4173 141.613 26.828L144.979 32.24C145.243 32.6653 145.28 33.0687 145.089 33.45C144.898 33.8167 144.568 34 144.099 34C143.674 34 143.344 33.8167 143.109 33.45L139.325 27.378C139.193 27.378 139.061 27.378 138.929 27.378H136.113V32.856C136.113 33.1787 136.003 33.45 135.783 33.67C135.578 33.89 135.306 34 134.969 34ZM136.113 25.266H138.929C139.926 25.266 140.748 24.9873 141.393 24.43C142.038 23.858 142.361 23.1247 142.361 22.23C142.361 21.262 142.038 20.47 141.393 19.854C140.748 19.238 139.926 18.93 138.929 18.93H136.113V25.266ZM154.919 34.352C153.511 34.352 152.265 34.0953 151.179 33.582C150.094 33.054 149.243 32.328 148.627 31.404C148.026 30.48 147.725 29.424 147.725 28.236V17.962C147.725 17.6247 147.835 17.3533 148.055 17.148C148.275 16.928 148.547 16.818 148.869 16.818C149.207 16.818 149.478 16.928 149.683 17.148C149.903 17.3533 150.013 17.6247 150.013 17.962V28.236C150.013 29.028 150.219 29.732 150.629 30.348C151.055 30.9493 151.634 31.426 152.367 31.778C153.115 32.1153 153.966 32.284 154.919 32.284C155.843 32.284 156.657 32.1153 157.361 31.778C158.08 31.426 158.637 30.9493 159.033 30.348C159.444 29.732 159.649 29.028 159.649 28.236V17.962C159.649 17.6247 159.759 17.3533 159.979 17.148C160.199 16.928 160.471 16.818 160.793 16.818C161.131 16.818 161.402 16.928 161.607 17.148C161.813 17.3533 161.915 17.6247 161.915 17.962V28.236C161.915 29.424 161.615 30.48 161.013 31.404C160.427 32.328 159.605 33.054 158.549 33.582C157.493 34.0953 156.283 34.352 154.919 34.352ZM171.391 34C171.069 34 170.797 33.89 170.577 33.67C170.357 33.45 170.247 33.1787 170.247 32.856V18.93H165.495C165.187 18.93 164.931 18.8347 164.725 18.644C164.535 18.4387 164.439 18.182 164.439 17.874C164.439 17.566 164.535 17.3167 164.725 17.126C164.931 16.9207 165.187 16.818 165.495 16.818H177.265C177.573 16.818 177.823 16.9207 178.013 17.126C178.219 17.3167 178.321 17.566 178.321 17.874C178.321 18.182 178.219 18.4387 178.013 18.644C177.823 18.8347 177.573 18.93 177.265 18.93H172.535V32.856C172.535 33.1787 172.425 33.45 172.205 33.67C171.985 33.89 171.714 34 171.391 34Z",fill:"white"}),g("path",{d:"M96.6524 47.048C96.3111 47.048 96.0071 47.008 95.7404 46.928C95.4738 46.848 95.2498 46.7013 95.0684 46.488C94.8871 46.2747 94.7484 45.9707 94.6524 45.576C94.5564 45.176 94.5084 44.6587 94.5084 44.024C94.5084 43.4107 94.5564 42.9093 94.6524 42.52C94.7538 42.1307 94.8978 41.8267 95.0844 41.608C95.2711 41.3893 95.4978 41.2373 95.7644 41.152C96.0311 41.0667 96.3324 41.024 96.6684 41.024C97.0631 41.024 97.4204 41.056 97.7404 41.12C98.0658 41.1787 98.3244 41.24 98.5164 41.304V42.224C98.3724 42.192 98.1538 42.1627 97.8604 42.136C97.5724 42.104 97.2578 42.088 96.9164 42.088C96.6924 42.088 96.5004 42.1147 96.3404 42.168C96.1858 42.216 96.0604 42.3093 95.9644 42.448C95.8738 42.5813 95.8044 42.776 95.7564 43.032C95.7138 43.288 95.6924 43.6213 95.6924 44.032C95.6924 44.5653 95.7271 44.9733 95.7964 45.256C95.8658 45.5333 95.9884 45.7253 96.1644 45.832C96.3404 45.9333 96.5911 45.984 96.9164 45.984C97.3164 45.984 97.6444 45.976 97.9004 45.96C98.1564 45.944 98.3618 45.9253 98.5164 45.904V46.816C98.2978 46.8907 98.0338 46.9493 97.7244 46.992C97.4204 47.0293 97.0631 47.048 96.6524 47.048ZM99.3479 47V41.08H101.796C102.105 41.08 102.388 41.1333 102.644 41.24C102.9 41.3413 103.103 41.5307 103.252 41.808C103.407 42.08 103.484 42.4693 103.484 42.976C103.484 43.344 103.439 43.6373 103.348 43.856C103.257 44.0693 103.14 44.2347 102.996 44.352C102.852 44.4693 102.703 44.56 102.548 44.624L103.652 47H102.444L101.492 44.808C101.359 44.808 101.201 44.808 101.02 44.808C100.839 44.8027 100.676 44.7973 100.532 44.792V47H99.3479ZM100.532 43.856H101.588C101.801 43.856 101.972 43.7973 102.1 43.68C102.233 43.5573 102.3 43.3227 102.3 42.976C102.3 42.64 102.233 42.4187 102.1 42.312C101.967 42.2 101.796 42.144 101.588 42.144H100.532V43.856ZM105.804 47.04C105.676 47.04 105.529 47.0267 105.364 47C105.198 46.9787 105.038 46.9253 104.884 46.84C104.734 46.7547 104.609 46.6267 104.508 46.456C104.412 46.28 104.364 46.04 104.364 45.736V42.432C104.364 42.08 104.433 41.8053 104.572 41.608C104.71 41.4107 104.884 41.2747 105.092 41.2C105.3 41.12 105.508 41.08 105.716 41.08C106.313 41.08 106.812 41.0907 107.212 41.112C107.612 41.1333 107.966 41.1573 108.276 41.184V42.176H106.068C105.902 42.176 105.774 42.216 105.684 42.296C105.593 42.376 105.548 42.4987 105.548 42.664V43.52L107.892 43.584V44.52L105.548 44.584V45.4C105.548 45.608 105.596 45.7493 105.692 45.824C105.793 45.8933 105.91 45.928 106.044 45.928H108.276V46.92C107.918 46.9573 107.516 46.9867 107.068 47.008C106.62 47.0293 106.198 47.04 105.804 47.04ZM108.761 47L110.617 41.08H112.113L113.969 47H112.737L112.361 45.76H110.345L109.977 47H108.761ZM110.625 44.696H112.081L111.353 42.096L110.625 44.696ZM115.455 47V42.144H113.831V41.08H118.271V42.144H116.639V47H115.455ZM118.91 47V41.08H120.094V47H118.91ZM122.601 47L120.745 41.08H121.969L123.353 45.72L124.737 41.08H125.953L124.097 47H122.601ZM127.835 47.04C127.707 47.04 127.56 47.0267 127.395 47C127.229 46.9787 127.069 46.9253 126.915 46.84C126.765 46.7547 126.64 46.6267 126.539 46.456C126.443 46.28 126.395 46.04 126.395 45.736V42.432C126.395 42.08 126.464 41.8053 126.603 41.608C126.741 41.4107 126.915 41.2747 127.123 41.2C127.331 41.12 127.539 41.08 127.747 41.08C128.344 41.08 128.843 41.0907 129.243 41.112C129.643 41.1333 129.997 41.1573 130.307 41.184V42.176H128.099C127.933 42.176 127.805 42.216 127.715 42.296C127.624 42.376 127.579 42.4987 127.579 42.664V43.52L129.923 43.584V44.52L127.579 44.584V45.4C127.579 45.608 127.627 45.7493 127.723 45.824C127.824 45.8933 127.941 45.928 128.075 45.928H130.307V46.92C129.949 46.9573 129.547 46.9867 129.099 47.008C128.651 47.0293 128.229 47.04 127.835 47.04Z",fill:"#FF6F61"}),g("path",{d:"M135.015 47.048C134.711 47.048 134.385 47.032 134.039 47C133.697 46.9627 133.404 46.912 133.159 46.848V45.912C133.393 45.9333 133.676 45.952 134.007 45.968C134.343 45.9787 134.66 45.984 134.959 45.984C135.263 45.984 135.503 45.944 135.679 45.864C135.855 45.7787 135.943 45.6187 135.943 45.384V45.168C135.943 44.992 135.889 44.8587 135.783 44.768C135.676 44.672 135.529 44.624 135.343 44.624H134.839C134.273 44.624 133.839 44.5013 133.535 44.256C133.236 44.0053 133.087 43.5813 133.087 42.984V42.696C133.087 42.12 133.249 41.6987 133.575 41.432C133.905 41.1653 134.38 41.032 134.999 41.032C135.324 41.032 135.647 41.0533 135.967 41.096C136.292 41.1387 136.567 41.184 136.791 41.232V42.168C136.545 42.152 136.271 42.136 135.967 42.12C135.668 42.104 135.391 42.096 135.135 42.096C134.857 42.096 134.633 42.1387 134.463 42.224C134.297 42.3093 134.215 42.4853 134.215 42.752V42.912C134.215 43.12 134.273 43.2693 134.391 43.36C134.508 43.4507 134.681 43.496 134.911 43.496H135.495C136.023 43.496 136.417 43.64 136.679 43.928C136.94 44.216 137.071 44.5787 137.071 45.016V45.352C137.071 45.816 136.983 46.1707 136.807 46.416C136.636 46.6613 136.396 46.8293 136.087 46.92C135.783 47.0053 135.425 47.048 135.015 47.048ZM139.182 47V42.144H137.558V41.08H141.998V42.144H140.366V47H139.182ZM144.869 47.04C144.538 47.04 144.232 47.0133 143.949 46.96C143.672 46.9013 143.426 46.8027 143.213 46.664C143.005 46.52 142.842 46.3227 142.725 46.072C142.613 45.816 142.557 45.4907 142.557 45.096V41.08H143.741V45.088C143.741 45.4133 143.84 45.6427 144.037 45.776C144.234 45.9093 144.512 45.976 144.869 45.976C145.221 45.976 145.496 45.9093 145.693 45.776C145.89 45.6427 145.989 45.4133 145.989 45.088V41.08H147.181V45.096C147.181 45.4907 147.122 45.816 147.005 46.072C146.888 46.3227 146.725 46.52 146.517 46.664C146.309 46.8027 146.064 46.9013 145.781 46.96C145.498 47.0133 145.194 47.04 144.869 47.04ZM148.121 47V41.08H150.625C151.159 41.08 151.575 41.2053 151.873 41.456C152.177 41.7067 152.388 42.0533 152.505 42.496C152.628 42.9387 152.689 43.4533 152.689 44.04C152.689 45.0373 152.519 45.7813 152.177 46.272C151.836 46.7573 151.319 47 150.625 47H148.121ZM149.305 45.936H150.505C150.873 45.936 151.132 45.776 151.281 45.456C151.431 45.136 151.505 44.664 151.505 44.04C151.505 43.528 151.468 43.136 151.393 42.864C151.319 42.5867 151.207 42.3973 151.057 42.296C150.913 42.1947 150.729 42.144 150.505 42.144H149.305V45.936ZM153.559 47V41.08H154.743V47H153.559ZM158.058 47.048C157.652 47.048 157.298 47.0107 156.994 46.936C156.69 46.856 156.436 46.712 156.234 46.504C156.031 46.2907 155.876 45.9867 155.77 45.592C155.668 45.1973 155.618 44.6827 155.618 44.048C155.618 43.4133 155.668 42.8987 155.77 42.504C155.876 42.104 156.031 41.7973 156.234 41.584C156.442 41.3707 156.695 41.224 156.994 41.144C157.298 41.064 157.652 41.024 158.058 41.024C158.463 41.024 158.818 41.064 159.122 41.144C159.426 41.224 159.679 41.3707 159.882 41.584C160.084 41.7973 160.236 42.104 160.338 42.504C160.439 42.8987 160.49 43.4133 160.49 44.048C160.49 44.6827 160.439 45.1973 160.338 45.592C160.236 45.9867 160.084 46.2907 159.882 46.504C159.679 46.712 159.423 46.856 159.114 46.936C158.81 47.0107 158.458 47.048 158.058 47.048ZM158.058 45.984C158.292 45.984 158.49 45.96 158.65 45.912C158.815 45.8587 158.943 45.7627 159.034 45.624C159.13 45.4853 159.199 45.2907 159.242 45.04C159.284 44.784 159.306 44.4533 159.306 44.048C159.306 43.6267 159.284 43.288 159.242 43.032C159.199 42.7707 159.13 42.5733 159.034 42.44C158.938 42.3013 158.81 42.208 158.65 42.16C158.49 42.112 158.292 42.088 158.058 42.088C157.823 42.088 157.626 42.112 157.466 42.16C157.311 42.208 157.183 42.3013 157.082 42.44C156.986 42.5733 156.914 42.7707 156.866 43.032C156.823 43.288 156.802 43.6267 156.802 44.048C156.802 44.4533 156.82 44.784 156.858 45.04C156.9 45.2907 156.97 45.4853 157.066 45.624C157.162 45.7627 157.29 45.8587 157.45 45.912C157.61 45.96 157.812 45.984 158.058 45.984Z",fill:"white"})])],-1);Ee.render=function(e,t,n,s,o,a){const i=b("ui-icon"),r=b("ui-button");return p(),m("div",Ve,[g("div",Se,[g("div",_e,[g("div",Oe,[g(i,{name:"avatar",size:"xl"})]),Ne]),g("div",He,[g("div",Ie,[ze,w(g("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.name=e),class:"\n              p-3\n              rounded-full\n              w-full\n              focus:outline-none\n              focus:ring-2\n              ring-purple-600\n              text-purple-500 text-center text-xl\n            ",placeholder:"Enter your name here",onKeyup:t[2]||(t[2]=y(k(((...e)=>a.login&&a.login(...e)),["prevent"]),["enter"]))},null,544),[[x,o.name]])])]),g("div",Ue,[g(r,{onClick:a.login},{default:C((()=>[Re])),_:1},8,["onClick"])]),je])])};const De={components:{UiIcon:Le},computed:{self(){return e=>e.sender===this.user.id},user(){return this.$store.getters["client/user"]},contact(){return this.$store.getters["contacts/contact"]},messages(){return this.$store.getters["messages/current"](this.user.id,this.contact&&this.contact.id)}},mounted(){this.scrollToBottom()},watch:{messages(e,t){e.length>t.length&&this.scrollToBottom()}},methods:{$time:I,scrollToBottom(){this.$nextTick((()=>{this.$refs.scroll.scrollTop=this.$refs.scroll.scrollHeight}))}}},Be={class:"flex-1 overflow-y-auto overflow-x-hidden p-4 space-y-4",ref:"scroll"},Fe={class:"\n          p-1\n          self-start\n          bg-white\n          ring-2 ring-gray-200\n          rounded-full\n          text-gray-900\n          shadow\n        "},Ze={class:"space-y-1 relative"};De.render=function(e,t,n,s,o,a){const i=b("ui-icon");return p(),m("div",Be,[(p(!0),m(L,null,M(a.messages,((e,t)=>(p(),m("div",{ref:"message",key:t,class:["p-3 flex relative group",{"space-x-3 space-x-reverse flex-row-reverse":a.self(e),"space-x-3":!a.self(e)}]},[g("div",Fe,[g(i,{name:"avatar",size:"sm"})]),g("div",Ze,[g("span",{class:["block text-xs",{"text-right":a.self(e)}]},$(a.self(e)?a.user.name:a.contact.name),3),g("p",{class:[{"right-0":a.self(e),"left-0":!a.self(e)},"\n            text-xs\n            translate-y-4\n            bg-gray-900 bg-opacity-80\n            text-white text-center\n            whitespace-nowrap\n            rounded-full\n            py-2\n            px-4\n            absolute\n            bottom-full\n            transition-all\n            duration-150\n            opacity-0\n            group-hover:opacity-100\n            delay-150\n          "]},$(a.$time(e.time)),3),g("p",{class:[{"bg-blue-400 text-white rounded-tl-3xl ":a.self(e),"border border-gray-200 bg-white rounded-tr-3xl ":!a.self(e)},"text-sm py-2 px-6 rounded-b-3xl shadow-inner max-w-lg"]},$(e.body),3)])],2)))),128))],512)};const Pe={components:{UiIcon:Le},data:()=>({message:void 0}),mounted(){this.$refs.message.focus()},methods:{sendMessage(){this.message=this.message.trim(),this.message&&(this.$store.dispatch("messages/addMessage",{sender:this.user.id,receiver:this.contact.id,body:this.message.trim(),time:new Date}),H.emit("new message",this.contact.id,this.message),this.message=void 0,this.$refs.message.focus())}},computed:{user(){return this.$store.getters["client/user"]},contact(){return this.$store.getters["contacts/contact"]}},watch:{message(e,t){Boolean(e)!==Boolean(t)&&H.emit(Boolean(e)?"typing":"stop typing",this.contact.id)}}},qe={class:"flex-none flex items-center space-x-3 p-3 bg-gray-200"};Pe.render=function(e,t,n,s,o,a){const i=b("ui-icon");return p(),m("div",qe,[w(g("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.message=e),ref:"message",class:"\n        w-full\n        resize-none\n        p-3\n        rounded-3xl\n        row-1\n        focus:outline-none\n        ring-1 ring-gray-200\n        focus:ring-blue-300 focus:ring-2\n      ",rows:"1",placeholder:"Type a message",onKeydown:t[2]||(t[2]=y(k(((...e)=>a.sendMessage&&a.sendMessage(...e)),["prevent"]),["enter"]))},null,544),[[x,o.message]]),g("button",{class:"\n        p-2\n        bg-white\n        hover:bg-blue-400\n        hover:text-white\n        rounded-full\n        relative\n        shadow-md\n      ",onClick:t[3]||(t[3]=(...e)=>a.sendMessage&&a.sendMessage(...e))},[g(i,{name:"send",size:"lg"})])])};const Ge={components:{UiIcon:Le},computed:{contacts(){return this.$store.getters["contacts/confirmed"]},contact(){return this.$store.getters["contacts/contact"]}},methods:{removeContact(e){this.$store.dispatch("contacts/removeContact",e)}}},Ye={class:"w-96 p-4 flex-shrink-0 space-y-8"},Ke={class:"space-y-4"},Qe={class:"flex justify-center items-center"},Je={class:"\n            p-4\n            bg-gradient-to-b\n            from-blue-50\n            via-blue-300\n            to-blue-200\n            rounded-full\n            text-gray-900\n            shadow-lg\n            ring-2 ring-gray-200\n          "},We={class:"flex flex-col items-center"},Xe={class:"text-lg"},et=g("span",{class:"text-xs flex items-center space-x-1"},[g("span",{class:"bg-green-400 rounded-full p-1.5"}),g("span",null,"Available")],-1),tt={class:"space-y-4 p-4 bg-blue-100 rounded shadow-inner"},nt=g("strong",{class:"text-xs"},"ID",-1);Ge.render=function(e,t,n,s,o,a){const i=b("ui-icon");return p(),m("div",Ye,[g("div",Ke,[g("div",Qe,[g("div",Je,[g(i,{name:"avatar",size:"3xl"})])]),g("span",We,[g("span",Xe,$(a.contact.name),1),et])]),g("div",tt,[g("div",null,[nt,g("p",null,$(a.contact.id),1)])]),g("button",{onClick:t[1]||(t[1]=e=>a.removeContact(a.contact)),class:"\n        p-3\n        w-full\n        shadow\n        rounded-full\n        bg-blue-400\n        hover:bg-blue-500\n        text-white\n      "}," Delete ")])};const st={components:{UiTransition:R,UiIcon:Le,UiButton:Ae},data:()=>({findContact:"",typingUsers:[]}),beforeUnmount(){H.removeAllListeners("typing"),H.removeAllListeners("stop typing")},mounted(){H.on("typing",(e=>{this.currentContact&&z("typing"),this.typingUsers.push(e.user.id)})),H.on("stop typing",(e=>{this.typingUsers=this.typingUsers.filter((t=>t!==e.user.id))}))},computed:{isTyping(){return e=>this.typingUsers.includes(e.id)},messages(){return this.$store.getters["messages/all"]},notSeen(){return e=>this.messages.filter((e=>e.new)).reduce(((t,n)=>(n.sender===e&&t++,t)),0)},user(){return this.$store.getters["client/user"]},contacts(){return this.$store.getters["contacts/confirmed"].filter((e=>-1!==e.name.toLowerCase().indexOf(this.findContact.toLowerCase())))},currentContact(){return this.$store.getters["contacts/contact"]},requests(){return this.$store.getters["requests/sent"]},newMessages(){return e=>this.$store.getters["messages/new"](e)},lastMessage(){return e=>this.$store.getters["messages/last"](this.user.id,e.id)},onCall(){return this.$store.getters["app/onCall"]},panel(){return this.$store.getters["app/panel"]}},methods:{$time:I,setCurrentContact(e){this.$store.dispatch("contacts/setCurrentContact",this.currentContact===e?void 0:e),this.findContact=""}}},ot={class:"p-3.5 bg-white flex items-center justify-between"},at=g("h2",{class:"text-2xl text-gray-900"},"Contacts",-1),it={class:"w-auto flex-0"},rt={class:"p-3 flex-none"},lt={class:"overflow-hidden flex flex-col flex-1"},ct={class:"divide-y overflow-x-hidden overflow-y-auto"},dt={class:"flex space-x-2 py-4 px-3 items-center"},ut={class:"relative py-1"},pt={class:"flex flex-col w-full relative col-span-5"},mt={class:"flex justify-between items-center"},Ct={class:"truncate space-x-2 items-center text-gray-900"},ht={key:0,class:"flex-shrink-0 text-xs"},ft={key:0,class:"w-full flex space-x-2 items-center"},gt={class:"truncate text-sm w-full"},vt={class:"flex-shrink-0 w-5 h-5"},wt={key:0,class:"\n                      flex\n                      w-5\n                      items-center\n                      justify-center\n                      bg-blue-400\n                      h-5\n                      text-xs\n                      rounded-full\n                      text-white\n                      shadow-md\n                    "};st.render=function(e,t,n,s,o,a){const i=b("ui-icon"),r=b("ui-button");return p(),m("div",{class:["lg:max-w-sm w-full flex-col flex-shrink-0 divide-y lg:flex",{hidden:!a.panel&&a.currentContact}]},[g("div",ot,[at,g("div",it,[g(r,{disabled:"ContactList"===a.panel,class:{"opacity-0":"ContactList"===a.panel},size:"sm",onClick:t[1]||(t[1]=t=>e.$store.dispatch("app/setPanel","ContactList"))},{default:C((()=>[g(i,{name:"add",color:"green"})])),_:1},8,["disabled","class"])])]),g("div",rt,[w(g("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>o.findContact=e),placeholder:"Search in contacts",class:"\n          w-full\n          text-sm\n          py-3\n          px-4\n          rounded-full\n          focus:outline-none\n          ring-1 ring-gray-200\n          focus:ring-blue-300 focus:ring-2\n        "},null,512),[[x,o.findContact]])]),g("div",lt,[g("div",ct,[(p(!0),m(L,null,M(a.contacts,(e=>(p(),m("a",{href:"#",class:["block",{"hover:bg-gray-100 bg-gray-50 ":!a.currentContact||e.id!==a.currentContact.id,"bg-blue-100 hover:bg-blue-100":a.currentContact&&e.id===a.currentContact.id}],key:e.id,onClick:k((t=>a.setCurrentContact(e)),["prevent"])},[g("div",dt,[g("div",ut,[g("div",{class:["\n                  w-10\n                  h-10\n                  flex\n                  rounded-full\n                  items-center\n                  justify-center\n                  shadow\n                  relative\n                ",{"animate-bounce":a.onCall.with&&a.onCall.with.id===e.id&&"Call"!==a.panel}]},[g("div",{class:["\n                    absolute\n                    inset-0\n                    rounded-full\n                    bg-gradient-to-t\n                    from-green-50\n                    via-green-300\n                    to-green-200\n                    ring-2 ring-gray-200\n                    z-0\n                  ",{"animate-spin":a.isTyping(e)}]},null,2),g(i,{name:"avatar",class:"text-gray-900 z-10"})],2)]),g("div",pt,[g("div",mt,[g("span",Ct,[g("span",null,$(e.name),1)]),a.lastMessage(e)?(p(),m("span",ht,$(a.$time(a.lastMessage(e).time)),1)):A("",!0)]),a.lastMessage(e)&&a.lastMessage(e).time?(p(),m("div",ft,[g("p",gt,$(a.lastMessage(e).body),1),g("div",vt,[a.newMessages(e)?(p(),m("span",wt,$(a.newMessages(e)),1)):(p(),m("span",{key:1,class:["flex",{"text-blue-500":a.lastMessage(e).sent}]},[g(i,{name:"check",size:"sm"}),a.lastMessage(e).seen?(p(),m(i,{key:0,name:"check",size:"sm",class:"-ml-2.5"})):A("",!0)],2))])])):A("",!0)])])],10,["onClick"])))),128))])])],2)};const xt={components:{UiIcon:Le,Messages:De,Texter:Pe,ContactDetail:Ge,UiTransition:R,Contacts:st,UiButton:Ae},data:()=>({showDetail:!1}),computed:{contacts(){return this.$store.getters["contacts/confirmed"]},contact(){return this.$store.getters["contacts/contact"]},user(){return this.$store.getters["client/user"]},panel(){return this.$store.getters["app/panel"]},onCall(){return this.$store.getters["app/onCall"]}},methods:{startCall(e=!1){console.log(e),this.$store.dispatch("app/setOnCall",{with:this.contact,caller:!0,video:e}).then((()=>{this.$store.dispatch("app/setPanel","Call").then((()=>{H.emit("calling",{contact:this.contact.id,caller:this.user,video:e}),z("ringtone",!0)}))}))}}},yt={class:"flex w-full divide-x"},bt={key:0,class:"w-full flex-1 flex flex-col bg-gray-50 min-w-min divide-y"},kt={class:"\n            p-2.5\n            bg-white\n            flex flex-col\n            lg:flex-row\n            lg:items-center\n            lg:justify-between\n            space-y-2\n            lg:space-y-0\n          "},Tt={class:"flex space-x-2 items-center"},Lt={class:"w-auto flex-0"},Mt={class:"text-2xl text-gray-900"},$t={class:"flex items-center space-x-2 justify-end"},At={class:"flex items-center space-x-2"},Et={class:"w-auto"},Vt=g("div",null,null,-1);xt.render=function(e,t,n,s,o,a){const i=b("contacts"),r=b("ui-icon"),l=b("ui-button"),c=b("messages"),d=b("texter"),u=b("ui-transition"),h=b("contact-detail");return p(),m("div",yt,[g(i),g(u,{animation:"scale"},{default:C((()=>[a.contact?(p(),m("div",bt,[g("div",kt,[g("div",Tt,[g("div",Lt,[g(l,{color:"white",onClick:t[1]||(t[1]=t=>e.$store.dispatch("contacts/setCurrentContact",void 0))},{default:C((()=>[g(r,{name:"arrow",class:"transform rotate-90"})])),_:1})]),g("h2",Mt,$(a.contact.name),1)]),g("div",$t,[g("div",At,[a.onCall.with?A("",!0):(p(),m(l,{key:0,title:"Start audio call",color:"white",onClick:t[2]||(t[2]=e=>a.startCall())},{default:C((()=>[g(r,{name:"call"})])),_:1})),a.onCall.with?A("",!0):(p(),m(l,{key:1,title:"Start video call",color:"white",onClick:t[3]||(t[3]=e=>a.startCall(!0))},{default:C((()=>[g(r,{name:"video"})])),_:1})),a.onCall.with&&a.contact.id===a.onCall.with.id&&"Call"!==a.panel?(p(),m(l,{key:2,title:"Current call",color:"blue",class:"animate-bounce",onClick:t[4]||(t[4]=t=>e.$store.dispatch("app/setPanel","Call"))},{default:C((()=>[g(r,{name:"call"})])),_:1})):A("",!0)]),g("div",Et,[g(l,{title:"Contact details",color:"white",class:{"rotate-90":o.showDetail},onClick:t[5]||(t[5]=e=>o.showDetail=!o.showDetail)},{default:C((()=>[g(r,{name:"options"})])),_:1},8,["class"])])])]),g(c),g(d)])):A("",!0)])),_:1}),g(u,{animation:"slide"},{default:C((()=>[o.showDetail&&a.contact?(p(),m(h,{key:0})):A("",!0)])),_:1}),Vt])};const St={components:{UiTransition:R,UiButton:Ae},data:()=>({error:void 0,contactId:void 0}),computed:{user(){return this.$store.getters["client/user"]},contact(){return this.$store.getters["contacts/contact"]},contacts(){return this.$store.getters["contacts/confirmed"]}},methods:{addContact(){return this.contacts.find((e=>e.id===this.contactId))?this.$store.dispatch("app/setAlert",{title:"Error",body:"This contact already exists.",color:"red"}):this.contactId&&this.contactId!==this.user.id?void this.$store.dispatch("contacts/addContact",{id:this.contactId,name:"Pending"}).then((()=>{H.emit("add contact",this.contactId),this.contactId=void 0})).then((()=>{this.$store.dispatch("app/setAlert",{title:"Sent",body:"Your request has been sent",color:"green"})})).then((()=>{this.$store.dispatch("app/setPanel",void 0)})):this.$store.dispatch("app/setAlert",{title:"Error",body:"Wrong Contact ID format, please try again.",color:"red"})}}},_t={class:"w-full space-y-4 p-3"},Ot={class:"flex flex-col space-y-4"},Nt=T("Add Contact"),Ht={class:"flex flex-col space-y-4"},It=T("Cancel ");St.render=function(e,t,n,s,o,a){const i=b("ui-button");return p(),m("div",_t,[w(g("input",{type:"text ",placeholder:"Enter contact ID here","onUpdate:modelValue":t[1]||(t[1]=e=>o.contactId=e),class:"\n        w-full\n        text-sm text-center\n        py-3\n        px-4\n        rounded-full\n        focus:outline-none\n        ring-1 ring-gray-200\n        focus:ring-blue-300 focus:ring-2\n      "},null,512),[[x,o.contactId]]),g("div",Ot,[g(i,{size:"sm",onClick:a.addContact},{default:C((()=>[Nt])),_:1},8,["onClick"])]),g("div",Ht,[g(i,{size:"sm",color:"blue",onClick:t[2]||(t[2]=t=>e.$store.dispatch("app/setPanel",void 0))},{default:C((()=>[It])),_:1})])])};const zt={components:{UiIcon:Le,UiButton:Ae},props:{info:{type:Object,default:()=>{}}},methods:{$time:I},mounted(){U(this.info)}},Ut={class:"shadow rounded-lg p-4 flex space-x-4 w-full"},Rt={class:"space-y-1"},jt={class:"space-y-1"},Dt={class:"text-sm"},Bt={class:"flex-shrink-0 text-xs text-blue-400 italic"},Ft={key:0,class:"flex space-x-4 border-t pt-2"};zt.render=function(e,t,n,s,o,a){const i=b("ui-icon"),r=b("ui-button");return p(),m("div",Ut,[g(i,{name:"notification"}),g("div",Rt,[g("strong",null,$(n.info.title),1),g("div",jt,[g("p",Dt,$(n.info.body),1),g("span",Bt,$(a.$time(n.info.time)),1)]),n.info.actions?(p(),m("div",Ft,[(p(!0),m(L,null,M(n.info.actions,((t,n)=>(p(),m(r,{size:"sm",onClick:n=>e.$store.dispatch(t.dispatch,t.data),color:n>0?"green":"red",key:n},{default:C((()=>[T($(t.label),1)])),_:2},1032,["onClick","color"])))),128))])):A("",!0)])])};const Zt={components:{Notification:zt},computed:{notifications(){return this.$store.getters["notifications/all"]}},mounted(){this.$store.dispatch("notifications/readAllNotifications")}},Pt={class:"space-y-4"},qt={class:"flex items-end space-x-2 justify-between"},Gt=g("h2",{class:"text-xl font-bold py-2"},"Notifications",-1),Yt={class:"space-y-2"},Kt={key:0,class:"italic h-full flex items-center justify-center"};Zt.render=function(e,t,n,s,o,a){const i=b("notification");return p(),m("div",Pt,[g("div",qt,[Gt,g("button",{class:"p-2 text-blue-400",onClick:t[1]||(t[1]=t=>e.$store.dispatch("notifications/removeAllNotifications"))}," Clear all ")]),g("div",Yt,[(p(!0),m(L,null,M(a.notifications,((e,t)=>(p(),m(i,{info:e,key:t},null,8,["info"])))),128))]),a.notifications.length?A("",!0):(p(),m("p",Kt," There are no any notifications. "))])};const Qt={components:{UiTransition:R,UiButton:Ae},data:()=>({coppied:void 0}),computed:{user(){return this.$store.getters["client/user"]}},methods:{$copy:function(e){return e.target.select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),!0}}},Jt={class:"w-full space-y-3"},Wt={class:"relative"},Xt={key:0,class:"\n            bg-green-500\n            text-white text-xs\n            rounded-lg\n            right-0\n            top-0\n            m-2\n            opacity-90\n            transform\n            block\n            absolute\n            p-2\n          "},en=T(" Logout ");Qt.render=function(e,t,n,s,o,a){const i=b("ui-transition"),r=b("ui-button");return p(),m("div",Jt,[g("div",Wt,[w(g("input",{class:"\n          w-full\n          p-3\n          focus:outline-none\n          bg-blue-200\n          rounded\n          shadow-inner\n          cursor-pointer\n        ","onUpdate:modelValue":t[1]||(t[1]=e=>a.user.id=e),readonly:"",onClick:t[2]||(t[2]=e=>o.coppied=a.$copy(e))},null,512),[[x,a.user.id]]),g(i,{animation:"pull"},{default:C((()=>[o.coppied?(p(),m("span",Xt,"Coppied")):A("",!0)])),_:1})]),g(r,{onClick:t[3]||(t[3]=t=>e.$store.dispatch("app/setEvent",{name:"logout",time:new Date})),color:"red"},{default:C((()=>[en])),_:1})])};const tn={components:{UiIcon:Le}},nn={class:"\n      bg-gray-800\n      text-white\n      p-4\n      flex-shrink-0 flex flex-col\n      space-y-4\n      items-center\n    "},sn={class:"py-4 space-y-5 flex-col flex"};tn.render=function(e,t,n,s,o,a){const i=b("ui-icon");return p(),m("div",nn,[g("button",{title:"Budgie Messenger",onClick:t[1]||(t[1]=t=>e.$store.dispatch("app/setPanel",void 0)),class:"p-2 bg-white rounded-full text-gray-900 shadow"},[g(i,{name:"avatar"})]),g("div",sn,[g("button",{title:"Add contact",class:"bg-gray-600 hover:bg-gray-700 p-3 rounded-full",onClick:t[2]||(t[2]=t=>e.$store.dispatch("app/setPanel",void 0))},[g(i,{name:"contacts"})])])])};const on=[{urls:["stun:stun.stunprotocol.org"]},{urls:"turn:numb.viagenie.ca",username:"muazkh",credential:"webrtc@live.com"}],an={components:{UiButton:Ae,UiIcon:Le},data:()=>({RTC:void 0,calling:!1,connected:!1,silence:!1,sessionStream:void 0,self:{audio:!0,video:!0},partner:{audio:!0,video:!0}}),computed:{contact(){return this.$store.getters["contacts/contact"]},onCall(){return this.$store.getters["app/onCall"]},config(){return{video:!!this.onCall.video&&{width:1280,height:720},audio:!0}}},mounted(){this.prepare(),H.on("answer",(e=>{this.RTC.setRemoteDescription(new RTCSessionDescription(e.answer)).catch((e=>this.$log("answer error",e)))})),H.on("candidate",(e=>{this.RTC.addIceCandidate(new RTCIceCandidate(e.candidate)).catch((e=>this.$log("candidate error",e)))})),H.on("hang",(()=>{this.hang()})),H.on("offer",(e=>{this.RTC.setRemoteDescription(new RTCSessionDescription(e.offer)).then((()=>{this.answer()})).catch((e=>this.$log("offer error",e)))}))},beforeUnmount(){H.removeAllListeners("answer"),H.removeAllListeners("candidate"),H.removeAllListeners("offer")},methods:{answer(){this.RTC.createAnswer().then((e=>{this.RTC.setLocalDescription(e).then((()=>{this.send("answer",{answer:e}),this.connected=!0,z("ringtone",!1,!1)}))})).catch((e=>{this.$log(e)}))},offer(){this.RTC.createOffer().then((e=>{this.RTC.setLocalDescription(e).then((()=>{this.send("offer",{offer:e}),this.connected=!0,z("ringtone",!1,!1)}))})).catch((e=>{this.$log(e)}))},hang(){z("ringtone",!1,!1),this.connected&&(this.connected=!1,this.sessionStream.getTracks().forEach((e=>{e.stop()})),this.RTC.close()),this.RTC=void 0,this.calling=!1,this.$store.dispatch("app/setPanel",void 0).then((()=>{this.$store.dispatch("app/setOnCall",{}),H.removeAllListeners("hang")})),this.send("hang")},prepare(){return navigator.mediaDevices.getUserMedia(this.config).then((e=>{this.sessionStream=e,this.$refs.self.srcObject=this.sessionStream,this.RTC=new RTCPeerConnection({iceServers:on},{optional:[{DtlsSrtpKeyAgreement:!0}]}),this.RTC.ontrack=e=>{this.$refs.partner.srcObject=e.streams[0]},this.sessionStream.getTracks().forEach((e=>this.RTC.addTrack(e,this.sessionStream))),this.RTC.onicecandidate=e=>{e.candidate&&this.send("candidate",{sdpMLineIndex:e.candidate.sdpMLineIndex,candidate:e.candidate})}})).catch((e=>{console.log("error at preparing",e)}))},send(e,t){t=l(r({},t),{contact:this.onCall.with.id}),H.emit(e,t)},setSilence(){z("ringtone",!1,!1),this.silence=!0},toggleMedia(e,t){this.$refs[e].srcObject.getTracks().forEach((n=>{n.kind===t&&(n.enabled=!n.enabled,this[e].audio=n.enabled)}))}}},rn={class:"bg-gray-700 p-4 h-full rounded-lg space-y-4 overflow-auto"},ln={class:"flex flex-col w-full"},cn={class:"p-2 w-full relative"},dn={class:"\n            flex\n            justify-center\n            space-x-4\n            absolute\n            bottom-0\n            right-0\n            m-4\n            text-white\n          "},un={class:"w-auto"},pn={class:"w-auto"},mn={class:"space-y-4 w-full p-8 self-center"},Cn={class:"flex justify-center items-center"},hn={class:"flex flex-col items-center text-white"},fn={key:0,class:"text-lg"},gn={key:1,class:"text-sm"},vn={class:"flex justify-center space-x-4"},wn={key:0,class:"w-auto"},xn={class:"w-auto"},yn={class:"flex justify-center space-x-4 text-white"},bn={key:0,class:"w-auto"},kn={key:1,class:"w-auto"},Tn={key:2,class:"w-auto"};an.render=function(e,t,n,s,o,a){const i=b("ui-icon"),r=b("ui-button");return p(),m("div",rn,[w(g("div",ln,[g("div",cn,[g("video",{class:"w-full h-full object-cover rounded-lg bg-gray-500",ref:"partner",onLoadedmetadata:t[1]||(t[1]=e=>e.target.play())},null,544),g("div",dn,[g("div",un,[a.onCall.video?(p(),m("button",{key:0,title:"Switch to full screen",class:"relative",onClick:t[2]||(t[2]=t=>e.$refs.partner.requestFullscreen())},[g(i,{name:"fullscreen"})])):A("",!0)]),g("div",pn,[g("button",{title:"Mute audio",class:"relative",onClick:t[3]||(t[3]=e=>a.toggleMedia("partner","audio"))},[g(i,{name:"volume"}),o.partner.audio?A("",!0):(p(),m(i,{key:0,name:"close",class:"absolute inset-0 h-full w-full text-red-500",size:"none"}))])])])]),g("div",{class:["p-2 w-full relative",{"h-0 w-0 overflow-hidden":!a.onCall.video}]},[g("video",{controls:"false",muted:"",class:"w-full h-full object-cover rounded-lg bg-gray-500",ref:"self",onLoadedmetadata:t[4]||(t[4]=e=>e.target.play())},null,544)],2)],512),[[E,o.connected]]),g("div",mn,[g("div",Cn,[g("div",{class:["\n            p-4\n            rounded-full\n            bg-white\n            text-gray-900\n            shadow-lg\n            ring-2 ring-gray-200\n          ",{"animate-bounce":!o.connected}]},[g(i,{name:"avatar",size:"3xl"})],2)]),g("span",hn,[a.onCall.with?(p(),m("span",fn,$(a.onCall.with.name),1)):A("",!0),o.connected?A("",!0):(p(),m("span",gn,$(a.onCall.video?"Video":"")+" Calling...",1))]),g("div",vn,[a.onCall.caller||o.connected?A("",!0):(p(),m("div",wn,[g(r,{title:"Answer",onClick:a.offer,class:"animate-pulse"},{default:C((()=>[g(i,{name:"call"})])),_:1},8,["onClick"])])),g("div",xn,[g(r,{title:"Hang up",onClick:a.hang,color:"red"},{default:C((()=>[g(i,{name:"call",class:"transform rotate-180"})])),_:1},8,["onClick"])])]),g("div",yn,[o.connected?A("",!0):(p(),m("div",bn,[g(r,{title:"Silence",class:["relative",{"text-gray-400":o.silence}],onClick:a.setSilence,color:"none"},{default:C((()=>[g(i,{name:"silence"}),o.silence?(p(),m(i,{key:0,name:"close",class:"absolute inset-0 h-full w-full p-1",size:"none"})):A("",!0)])),_:1},8,["onClick","class"])])),o.connected?(p(),m("div",kn,[g(r,{title:"Mute your microphone",onClick:t[5]||(t[5]=e=>a.toggleMedia("self","audio")),color:"none",class:["relative",{"text-gray-400":!o.self.audio}]},{default:C((()=>[g(i,{name:"mic"}),o.self.audio?A("",!0):(p(),m(i,{key:0,name:"close",class:"absolute inset-0 h-full w-full p-1",size:"none"}))])),_:1},8,["class"])])):A("",!0),o.connected?(p(),m("div",Tn,[g(r,{title:"Turn off your camera",class:["relative",{"text-gray-400":!o.self.video}],onClick:t[6]||(t[6]=e=>a.toggleMedia("self","video")),color:"none"},{default:C((()=>[g(i,{name:"video"}),o.self.video?A("",!0):(p(),m(i,{key:0,name:"close",class:"absolute inset-0 h-full w-full p-1",size:"none"}))])),_:1},8,["class"])])):A("",!0)])])])};const Ln={components:{ContactList:St,Conversation:xt,UiTransition:R,UiIcon:Le,Notifications:Zt,Profile:Qt,SidePanel:tn,Call:an,UiButton:Ae},data:()=>({contactId:void 0}),computed:{user(){return this.$store.getters["client/user"]},contact(){return this.$store.getters["contacts/contact"]},contacts(){return this.$store.getters["contacts/confirmed"]},notifications(){return this.$store.getters["notifications/unseen"]},panel(){return this.$store.getters["app/panel"]},panelComponent(){return this.$options.components[this.panel]}},beforeCreate(){this.$store.dispatch("app/setPanel",void 0).then((()=>{const e=this.$store.getters["app/onCall"];e.with&&(H.emit("hang",{contact:e.with.id}),this.$store.dispatch("app/setOnCall",{}))}))},mounted(){H.on("calling",(e=>{this.$store.dispatch("app/setOnCall",{with:e.caller,video:e.video}).then((()=>{this.$store.dispatch("app/setPanel","Call"),z("ringtone",!0)}))})),H.on("contact request",(e=>{this.$store.dispatch("notifications/addNotification",{title:"Contact Request",body:`${e.id} sent you a contact request.`,time:new Date,actions:[{label:"Delete",dispatch:"notifications/removeNotification",data:e},{label:"Accept",dispatch:"contacts/acceptContactRequest",data:e}]}).then((()=>{z("notify"),this.$store.dispatch("app/setAlert",{title:"Contact Request",body:`You have new contact request from ${e.id}.`,color:"blue"})}))})),H.on("contact not found",(e=>{this.$store.dispatch("contacts/removeContact",e).then((()=>{this.$store.dispatch("app/setAlert",{title:"Error",body:"Contact not found.",color:"red"})}))})),H.on("request accepted",(e=>{this.$store.dispatch("contacts/addContact",e).then((()=>{this.$store.dispatch("notifications/addNotification",{title:"Request Accepted",body:`${e.name} accepted your contact request.`,time:new Date}).then((()=>{z("notify"),this.$store.dispatch("app/setAlert",{title:"Contact Request",body:`${e.name} accepted your contact request.`,color:"green"})}))}))})),H.on("new message",(e=>{this.contact&&this.contact.id===e.sender||(e=l(r({},e),{new:!0}),z("message")),this.$store.dispatch("messages/addMessage",e).then((()=>{U({title:this.$store.getters["contacts/find"](e.sender).name,body:e.body})}))}))},beforeUnmount(){H.removeAllListeners("calling"),H.removeAllListeners("contact request"),H.removeAllListeners("contact not found"),H.removeAllListeners("request accepted"),H.removeAllListeners("new message")},methods:{$play:z}},Mn={class:"h-screen overflow-hidden bg-white flex w-full"},$n={class:"border-b flex items-center justify-between flex-none"},An=g("h1",{class:"hidden lg:block text-2xl p-4 text-gray-900"},"Budgie",-1),En={class:"w-full lg:w-80 flex lg:space-x-4 relative p-4"},Vn={class:"group"},Sn={key:0,class:"\n                  bg-red-500\n                  w-5\n                  h-5\n                  text-xs\n                  absolute\n                  top-0\n                  right-0\n                  -mt-1\n                  -mr-1\n                  rounded-full\n                  text-white\n                  flex\n                  items-center\n                  justify-center\n                  shadow-md\n                "},_n={class:"pl-4 lg:border-l lg:w-full ml-auto"},On={class:"flex flex-col w-full"},Nn={class:"text-lg text-gray-900"},Hn=g("span",{class:"text-xs flex items-center space-x-1"},[g("span",{class:"bg-green-400 rounded-full p-1.5"}),g("span",null,"Available")],-1),In={class:"flex flex-1 divide-x overflow-auto"},zn={key:0,class:"space-y-4 bg-white z-30 w-full lg:max-w-sm shadow p-4 relative"};Ln.render=function(e,t,n,s,o,a){const i=b("side-panel"),r=b("ui-icon"),l=b("ui-button"),c=b("conversation"),d=b("ui-transition");return p(),m("div",Mn,[g(i),g("div",{class:["w-full flex-col overflow-hidden lg:flex",{hidden:a.panel,flex:!a.panel}]},[g("div",$n,[An,g("div",En,[g("div",Vn,[g(l,{title:"Show notifications",color:"white",class:["relative",{"bg-gray-100":"Notifications"===a.panel}],onClick:t[1]||(t[1]=t=>e.$store.dispatch("app/setPanel","Notifications"))},{default:C((()=>[a.notifications.length?(p(),m("span",Sn,$(a.notifications.length),1)):A("",!0),g(r,{name:"notification"})])),_:1},8,["class"])]),g("div",_n,[g("button",{title:"Profile",class:"flex w-full space-x-2 items-center text-left group",onClick:t[2]||(t[2]=t=>e.$store.dispatch("app/setPanel","Profile"))},[g("span",{class:["\n                  rounded-full\n                  bg-white\n                  group-hover:bg-gray-100 group-hover:bg-gray-100\n                  shadow\n                  px-3\n                  py-3\n                  text-lg\n                ",{"bg-gray-100":"Profile"===a.panel}]},[g(r,{name:"avatar"})],2),g("span",On,[g("span",Nn,$(a.user.name),1),Hn]),g(r,{name:"arrow",class:["ml-auto transform transition-all",{"rotate-90":"Profile"===a.panel}]},null,8,["class"])])])])]),g("div",In,[g(c)])],2),g(d,{animation:"slide"},{default:C((()=>[a.panel?(p(),m("div",zn,[g(d,{animation:"pull"},{default:C((()=>[(p(),m(v(a.panelComponent)))])),_:1})])):A("",!0)])),_:1})])};const Un={green:"bg-green-400 text-white",blue:"bg-blue-400 text-white",red:"bg-red-400 text-white",white:"bg-white"},Rn={components:{Notification:zt,UiTransition:R,UiButton:Ae},props:{color:{type:String,default:"white"}},data:()=>({show:void 0}),computed:{info(){return this.$store.getters["app/alert"]},bg(){return Un[this.info.color]}},watch:{info(e,t){e!==t&&(clearTimeout(this.show),this.show=setTimeout((()=>{this.show=void 0}),5e3))}}},jn={key:0,class:"fixed bottom-0 right-0 m-4 z-50 w-full max-w-xs"};Rn.render=function(e,t,n,s,o,a){const i=b("notification"),r=b("ui-transition");return p(),m(r,{animation:"pull"},{default:C((()=>[o.show?(p(),m("div",jn,[g(i,{info:a.info,class:a.bg},null,8,["info","class"])])):A("",!0)])),_:1})};const Dn={components:{Login:Ee,Messenger:Ln,UiTransition:R,Alert:Rn},computed:{user(){return this.$store.getters["client/user"]}},data:()=>({connected:!1}),mounted(){this.user.name&&this.login(this.user),H.on("disconnect",(()=>{this.$log("you have been disconnected")}))},beforeUnmount(){H.removeAllListeners("disconnect")},methods:{login(e){this.connected=H.connect(),this.connected&&(H.emit("register",e),this.$store.dispatch("client/addClient",e))},logout(){H.disconnect(),this.$store.dispatch("client/removeClient").then((()=>{localStorage.removeItem("vuex"),this.connected=!1,window.location.reload()}))}}},Bn={class:"\n      min-h-screen\n      lg:h-screen\n      relative\n      antialiased\n      bg-gradient-to-t\n      to-blue-500\n      via-purple-400\n      from-pink-700\n    "};Dn.render=function(e,t,n,s,o,a){const i=b("alert"),r=b("login"),l=b("messenger"),c=b("ui-transition");return p(),m("div",Bn,[g(i),g(c,{animation:"translate"},{default:C((()=>[a.user.name?(p(),m(l,{key:1})):(p(),m(r,{key:0,onLogin:t[1]||(t[1]=e=>a.login(e))}))])),_:1})])};const Fn=V({modules:{app:{namespaced:!0,state:{alert:void 0,event:void 0,panel:void 0,onCall:{}},getters:{alert:e=>e.alert,event:e=>e.event,onCall:e=>e.onCall,panel:e=>e.panel},mutations:{SET_ALERT(e,t){e.alert=t},SET_EVENT(e,t){e.event=t},SET_PANEL(e,t){e.panel=e.panel===t?void 0:t},SET_ON_CALL(e,t){e.onCall=t}},actions:{setAlert({commit:e},t){e("SET_ALERT",t)},setEvent({commit:e},t){e("SET_EVENT",t)},setPanel({commit:e},t){e("SET_PANEL",t)},setOnCall({commit:e},t){e("SET_ON_CALL",t)}}},client:{namespaced:!0,state:()=>{},getters:{user:e=>e},mutations:{ADD_CLIENT(e,t){e.id=t.id,e.name=t.name,e.avatar=t.avatar},REMOVE_CLIENT(e){delete e.name,delete e.id,delete e.avatar}},actions:{addClient({commit:e},t){e("ADD_CLIENT",t)},removeClient({commit:e}){e("REMOVE_CLIENT")}}},contacts:{namespaced:!0,state:{items:[]},getters:{all:e=>e.items,confirmed:e=>e.items.filter((e=>e.clientId&&e.socketId)),contact:e=>e.current,find:e=>t=>e.items.find((e=>e.id===t))},mutations:{ADD_CONTACT(e,t){e.items=e.items.filter((e=>e.id!==t.id)),e.items.push(t)},REMOVE_CONTACT(e,t){e.items=e.items.filter((e=>e.id!==t.id))},REMOVE_ALL_CONTACTS(e){e.items=[]},SET_CONTACT_STATUS(e,t){const n=e.items.find((e=>e.id===t.id));n||(n.online=t)},SET_CURRENT_CONTACT(e,t){e.current=t},ACCEPT_CONTACT_REQUEST(e,t){e.items=e.items.filter((e=>e.id!==t.id)),e.items.push(t),H.emit("accept request",t.id)}},actions:{addContact({commit:e},t){e("ADD_CONTACT",t)},removeContact({commit:e,dispatch:t},n){e("REMOVE_CONTACT",n),t("setCurrentContact",void 0),t("messages/removeContactMessages",n,{root:!0})},removeAllContacts({commit:e,dispatch:t}){e("REMOVE_ALL_CONTACTS"),t("messages/removeAllMessages",null,{root:!0})},setCurrentContact({commit:e,dispatch:t},n){e("SET_CURRENT_CONTACT",n),t("messages/setMessageStatus",n,{root:!0})},setContactStatus({commit:e},t){e("SET_CONTACT_STATUS",t)},acceptContactRequest({commit:e,dispatch:t},n){e("ACCEPT_CONTACT_REQUEST",n),t("notifications/removeNotification",n,{root:!0})}}},messages:{namespaced:!0,state:{items:[]},getters:{all:e=>e.items,current:e=>(t,n)=>e.items.filter((e=>e.sender===n&&e.receiver===t||e.sender===t&&e.receiver===n)),last:e=>(t,n)=>{const s=e.items.filter((e=>e.sender===n&&e.receiver===t||e.sender===t&&e.receiver===n));return s[s.length-1]},new:e=>t=>e.items.filter((e=>e.sender===t.id)).reduce(((e,t)=>(t.new&&e++,e)),0)},mutations:{ADD_MESSAGE(e,t){e.items.push(t)},REMOVE_CONTACT_MESSAGES(e,t){e.items=e.items.filter((e=>e.sender===t))},REMOVE_ALL_MESSAGES(e){e.items=[]},SET_MESSAGE_STATUS(e,t){t&&e.items.map((e=>{e.sender===t.id&&delete e.new}))}},actions:{addMessage({commit:e},t){e("ADD_MESSAGE",t)},removeContactMessages({commit:e},t){e("REMOVE_CONTACT_MESSAGES",t)},removeAllMessages({commit:e}){e("REMOVE_ALL_MESSAGES")},setMessageStatus({commit:e},t){e("SET_MESSAGE_STATUS",t)}}},notifications:{namespaced:!0,state:{items:[]},getters:{all:e=>e.items,unseen:e=>e.items.filter((e=>!e.seen))},mutations:{ADD_NOTIFICATION(e,t){e.items.push(t)},REMOVE_NOTIFICATION(e,t){e.items=e.items.filter((e=>e.data!==t.data))},REMOVE_ALL_NOTIFICATIONS(e){e.items=[]},READ_ALL_NOTIFICATIONS(e){e.items.map((e=>(e.seen=!0,e)))}},actions:{addNotification({commit:e,dispatch:t},n){t("removeNotification",n),e("ADD_NOTIFICATION",n)},removeNotification({commit:e},t){e("REMOVE_NOTIFICATION",t)},removeAllNotifications({commit:e}){e("REMOVE_ALL_NOTIFICATIONS")},readAllNotifications({commit:e}){e("READ_ALL_NOTIFICATIONS")}}}},plugins:[S()]});var Zn={computed:{event(){return this.$store.getters["app/event"]}},methods:{$log(e){console.log(e)}},watch:{event(e){this[e.name]&&this[e.name]()}}};_(Dn).mixin(Zn).use(Fn).mount("#app");
